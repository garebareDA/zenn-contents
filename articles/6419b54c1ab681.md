---
title: "action_argsã‚’ä½¿ã†ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«è‡ªå‹•çš„ã«ãƒ¢ãƒ‡ãƒ«åãŒè¿½åŠ ã•ã‚Œã‚‹ç½ ã«ãƒãƒã£ãŸ"
emoji: "ğŸ˜½"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['ruby', 'rails']
published: true
publication_name: "smartcamp"
---
# çµŒç·¯
1. Railsã§`user_infomations_controller`(ä»®)ã«POST APIã‚’è¿½åŠ 
2. Rspecã§ä¸‹è¨˜ã®å†…å®¹ã®jsonã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
    ```ruby
    {
    	user_infomation: {
    		name:ex
    	}
    }
    ```
3. controllerå†…ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è¦‹ã‚‹ã¨ãªãœã‹ç©ºã®jsonãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹
    ```ruby
    {
    	user_infomation: {}
    }
    ```
# åŸå› 
action_argã¨`params`ã«å¯¾ã—ã¦`deep_transform_keys!(&:underscore)`ã‚’ä½¿ã£ã¦ã„ãŸã®ã§ã™ãŒãã‚ŒãŒåŸå› ã§ã—ãŸã€‚
action_argsã¯è‡ªå‹•çš„ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒãƒƒã‚·ãƒ¥ã«ãƒ¢ãƒ‡ãƒ«ãŒè¿½åŠ ã•ã‚Œã‚‹ã®ã§ã€`deep_transform_keys!`å®Ÿè¡Œæ™‚ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸjsonã®ä¸­ã«ãƒ¢ãƒ‡ãƒ«åã¨è¢«ã‚‹ã‚‚ã®ãŒã‚ã‚Œã°ä¸Šæ›¸ãã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚
## action_argsã¨ã¯
ä»¥ä¸‹ã®gemã§ã™ã€‚
Railsã®ã‚³ãƒ³ãƒˆãƒ¼ãƒ­ãƒ¼ãƒ©ãƒ¼ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«ããŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ä¸­èº«ã‚’å¼•æ•°ã§å—ã‘å–ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
https://github.com/asakusarb/action_args
## action_argsã®permitsã«ã‚ˆã‚Šã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸãƒãƒƒã‚·ãƒ¥ã«ãƒ¢ãƒ‡ãƒ«åãŒè‡ªå‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹
ä»¥ä¸‹ã®ç®‡æ‰€ã§è‡ªå‹•çš„ã«ãƒ¢ãƒ‡ãƒ«åãŒè¿½åŠ ã•ã‚Œã€çµæœãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã«ãƒ¢ãƒ‡ãƒ«åãŒè¿½åŠ ã•ã‚Œã‚‹ã•ã‚Œã‚‹ã‚ã‘ã§ã™ã­

```ruby
    def permits(*attributes, model_name: nil, **kw_attributes)
      @permitted_attributes, @permitting_model_name = attributes << kw_attributes, model_name
    end
```
# å›é¿æ–¹æ³•
jsonã§ä½¿ç”¨ã™ã‚‹åå‰ã‚’å¤‰æ›´ã™ã‚‹ã€æ¥µåŠ›ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ãƒ¢ãƒ‡ãƒ«åã‚’ä½¿ã†ã“ã¨ã‚’é¿ã‘ã¾ã™ã€‚
