---
title: "ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’Goã§ã™ã‚‹å ´åˆã«Interfaceã‚’ç„¡ãã™"
emoji: "ğŸ˜½"
type: "idea" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["go"]
published: false
---

ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’çŸ¥ã£ã¦ã„ã‚‹äººå‘ã‘ã§ã™ã€‚
ä¸Šè¾ºã—ã‹å–‹ã‚‰ãªã„ã®ã§è©±åŠåˆ†ã§ã™ã€‚
é€”ä¸­ã§ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã¯ãªããªã‚Šã¾ã™ã€‚

# Interfaceã‚’ãªããã†ã¨æ€ã£ãŸãã£ã‹ã‘
ã¨ã‚ã‚‹æ–¹ã‹ã‚‰Goã§ç„¡é§„ãªInterfaceã¯è‰¯ããªã„ã¨è¨€ã‚ã‚ŒãŸã“ã¨ãŒãã£ã‹ã‘ã§ã™ã€‚
ä½¿ã„ã¾ã‚ã›ãªã„Interfaceã¯ã‚ã¾ã‚Šè‰¯ããªã„ã‚‰ã—ã„ï¼Ÿã§ã™ã€‚

# UseCaseå±¤ã‚’ç„¡ãã™
goã§ã¯ã“ã‚“ãªé¢¨ã«å®Ÿè£…ã—ã¾ã™ãŒè¤‡é›‘ã•ã‚’ãªãã™ãŸã‚ã«ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ä¸€ã¤å‰Šé™¤ã—ã‚ˆã†ã¨ã„ã†é­‚èƒ†ã§ã™ã€‚
ä»Šå›ã¯çœã„ã¦ã„ã¾ã™ãŒå®Ÿéš›ã¯ã“ã®å®Ÿè£…ä¾‹ã«InterfaceãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚
```go
type Entity struct {
  ...
}

type Repository struct {
  ...
}

func (r *Repository) Insert(entity *Entity) {
  ...
}

type Usecase struct {
  Repository *Repository
}

func (u *Usecase) Post(entity *Entity) {
  r.Repository.Insert(entity)
}

type Controller struct {
  Usecase *Usecase
}

func (c *Controller) Post(ctx) {
  entity = ctx.Hoge()
  c.Usecase.Post(entity)
}

func main() {
  repo := Repository{}
  use := UseCase {Repository: repo}
  ctrl := Controller {Usecase: use}

  ctrl.Post(ctx)
}
```

å®Ÿè£…ä¾‹
å˜ç´”ã«Usecaseæ§‹é€ ä½“ã‚’å‰Šé™¤ã—ã¦Controllerã«Repositoryã‚’æŒãŸã›ã¾ã™ã€‚
```go
type Entity struct {
  ...
}

type Repository struct {
  ...
}

func (r *Repository) Insert(entity *Entity) {
  ...
}

type Controller struct {
  Repository *Repository
}

func (c *Controller) Post(ctx) {
  entity = ctx.Hoge()
  c.Repository.Insert(entity)
}

func main() {
  repo := Repository{}
  ctrl := Controller {Repository: repo}
  ctrl.Post(ctx)
}
```

# Interfaceã‚’ç„¡ãã™
Interfaceã‚’ãŸã å‰Šé™¤ã™ã‚‹ã¨mockãŒä½œã‚Œãªããªã‚Šãƒ†ã‚¹ãƒˆãŒè¡Œã„ã«ãããªã‚Šã¾ã™ã€‚
ã®ã§ã¾ãšControllerå±¤ã¨Entityå±¤ã‚’åˆ‡ã‚Šé›¢ã—ã¾ã™ã€‚
Controllerã«Entityã®å®Ÿæ…‹ã‚’æŒãŸã›ãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚
ã“ã®æ™‚ç‚¹ã§ã‚‚ã†Cleanã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã¯ãªã„ã§ã™ãŒâ€¦â€¦ã€‚

å®Ÿè£…ä¾‹
å®Ÿæ…‹ã‚’æŒãŸã›ãªã„ã‚ˆã†ã«ã—ã¦ã„ãã¾ã™ã€‚
ã“ã®æ™‚ç‚¹ã§Interfaceã‚’å‰Šé™¤ã§ãã¾ã™ã€‚
```go
type Entity struct {
  ...
}

type Repository struct {
  ...
}

func (r *Repository) Insert(entity *Entity) {
  ...
}

type Controller struct {}
func (c *Controller) Post(ctx) {
  entity = ctx.Hoge()
  c.Repository.Insert(entity)
}

func main() {
  repo := Repository{}
  ctrl := Controller {Repository: repo}
  ctrl.Post(ctx)
}
```

ãã—ã¦é–¢æ•°ã®å¼•æ•°ã‚’InterfaceãŒå¤‰ã‚ã‚Šã«ã—ã¦Controllerã«Repositoryã®é–¢æ•°ã‚’æ¸¡ã›ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚
```go
type Entity struct {
  ...
}

type Repository struct {
  ...
}

func (r *Repository) Insert(entity *Entity) {
  ...
}

type Controller struct {}
func (c *Controller) Post(ctx, insert func(*Entity)) {
  entity := ctx.Hoge()
  insert(entity)
}

func main() {
  repo := Repository{}
  ctrl := Controller {Repository: repo}
  ctrl.Post(ctx, repo.Insert)
}
```
ã“ã‚Œã§Interfaceã‚’ç„¡ãã›ã¾ã—ãŸã€‚

# å•é¡Œç‚¹
å¿…è¦ãªé–¢æ•°ãŒå¢—ãˆã‚‹ã¨å¼•æ•°ã‚‚å¢—ãˆã‚‹
æ„å›³ã—ã¦ãªã„é–¢æ•°ãŒæ¸¡ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹