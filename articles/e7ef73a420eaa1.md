---
title: "クリーンアーキテクチャをGoでする場合にInterfaceを無くす"
emoji: "😽"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["go"]
published: false
---

クリーンアーキテクチャを知っている人向けです。
上辺しか喋らないので話半分です。

# Interfaceをなくそうと思ったきっかけ
とある方からGoで無駄なInterfaceは良くないと言われたことがきっかけです。
使いまわせないInterfaceはあまり良くないらしい？です。

# UseCase層を無くす
一番最初にUseCase層を無くします。
```go
func main() {

}
```
goではこんな風に実装しますが複雑さをなくすためにレイヤーを一つ削除しようという魂胆です。

# Interfaceを無くす
Interfaceをただ削除するとmockが作れなくなりテストが行いにくくなります。
のでまずController層とEntity層を切り離します。
ControllerにEntityの実態を持たせないようにします。
この時点でもうCleanアーキテクチャではないですが……。

実装例
```go
func main() {}
```

そして関数の引数をInterfaceが変わりにしてControllerにRepositoryの関数を渡せるようにします。

```go
func main() {}
```
これでInterfaceを無くせました。

# 問題点
必要な関数が増えると引数も増える
意図してない関数が渡される可能性がある