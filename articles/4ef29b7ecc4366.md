---
title: "RubyのClassのprivateはキーワードじゃなくてメソッドらしい"
emoji: "🐼"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
publication_name: "smartcamp"
---

## RubyのPrivate

こいつのことです。初学者なので勘違いしていましたがキーワードではないらしい……。

```ruby
class MyClass
  def hoge
    puts 'test'
  end

  private <--こいつ
  def hogehoge
  end
end
```

この`Class`内にある`private`はキーワードではなくメソッドなのでで実際に定義を見ることもできます。
並びに`public`もキーワードではなくメソッドです。

## privateの中身

```ruby
# rbs/prototype.rb

 def private
  @private ||= AST::Members::Private.new(location: nil)
 end

 def public
  @public ||= AST::Members::Public.new(location: nil)
 end
```

どうやらprivateの中身は`@private`がnilの場合に新しい`AST::Member::Private`を`@private`に代入する関数のようです

```ruby
# rbs/prototype.rb
def current_accessibility(decls, index = decls.size)
  slice = decls.slice(0, index) or raise
  idx = slice.rindex { |decl| decl == private || decl == public }
  if idx
    _ = decls[idx]
  else
    public
  end
end
```

```ruby
# rbs/prototype.rb
def is_accessibility?(decl)
  decl == public || decl == private
end
```

```ruby
# rbs/ast.rb
class Public < Base
  include LocationOnly
  def to_json(state = _ = nil)
    { member: :public, location: location }.to_json(state)
  end
end

class Private < Base
  include LocationOnly
  def to_json(state = _ = nil)
    { member: :private, location: location }.to_json(state)
  end
end
```
